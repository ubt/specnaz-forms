# üìä –û—Ç—á–µ—Ç –ø–æ –∞–Ω–∞–ª–∏–∑—É –ø—Ä–æ–µ–∫—Ç–∞ specnaz-forms

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 2025-12-03
**–í–µ—Ä—Å–∏—è –ø—Ä–æ–µ–∫—Ç–∞:** 2.0.0

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –û–±—Ä–∞–±–æ—Ç–∫–∞ KV –æ—á–µ—Ä–µ–¥–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º Cloudflare Worker (–Ω–µ –≤—Ö–æ–¥–∏—Ç –≤ —ç—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π)

---

## 1Ô∏è‚É£ –ù–ï–†–ê–ë–û–ß–ò–ï –ò –ù–ï–ò–°–ü–û–õ–¨–ó–£–ï–ú–´–ï –ß–ê–°–¢–ò –ö–û–î–ê

### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

#### 1.1. –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ KV –≤ `/app/api/batch/results/route.js:12`

```javascript
export async function GET(req, context) {
  initKV(context.env);  // ‚ùå –û–®–ò–ë–ö–ê! context.env –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ Next.js 15
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –í Next.js 15 Edge Runtime –ø–∞—Ä–∞–º–µ—Ç—Ä `context.env` –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è. –≠—Ç–∞ —Å—Ç—Ä–æ–∫–∞ –≤—ã–∑–æ–≤–µ—Ç –æ—à–∏–±–∫—É –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ batch –æ–ø–µ—Ä–∞—Ü–∏–π.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –£–±—Ä–∞—Ç—å –ø–µ—Ä–µ–¥–∞—á—É `context.env` (–∫–∞–∫ —ç—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ –≤ `status/route.js:16`)

```javascript
initKV(); // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
```

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `app/api/batch/results/route.js:12`

---

### üü° –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

#### 1.2. `cleanupKVQueue()` –≤ `lib/kv-queue.js:278`

–§—É–Ω–∫—Ü–∏—è –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ KV (—Å—Ç–∞—Ä—à–µ 24 —á–∞—Å–æ–≤), –Ω–æ **–Ω–∏–≥–¥–µ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è**.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- –í—ã–∑—ã–≤–∞—Ç—å –∏–∑ Cloudflare Worker (cron trigger –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏)
- –ò–ª–∏ –≤—ã–∑—ã–≤–∞—Ç—å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –∏–∑ API endpoints

---

#### 1.3. `setEmployeeUrl()` –≤ `lib/notion.js:792`

–§—É–Ω–∫—Ü–∏—è –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ URL —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø—Ä–æ–µ–∫—Ç–µ.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –£–¥–∞–ª–∏—Ç—å –∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è –±—É–¥—É—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

---

#### 1.4. POST –º–µ—Ç–æ–¥ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∫—ç—à–∞ –≤ `app/api/batch/status/route.js:258`

–ú–µ—Ç–æ–¥ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω–æ:
- –ù–µ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
- –ù–µ—Ç UI –¥–ª—è –µ–≥–æ –≤—ã–∑–æ–≤–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –£–¥–∞–ª–∏—Ç—å –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å.

---

### üü¢ –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –∫–æ–¥

#### 1.5. –ë–µ—Å–ø–æ–ª–µ–∑–Ω–∞—è –ª–æ–≥–∏–∫–∞ batchSize –≤ `app/form/[token]/page.jsx:356-361`

```javascript
const batchOptions = {
  batchSize: operations.length <= 20 ? 20 : 50,  // ‚ùå –ë–µ—Å–ø–æ–ª–µ–∑–Ω–æ
  // ...
};
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ –æ–ø–µ—Ä–∞—Ü–∏–π 15, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ batchSize=20 –Ω–∏—á–µ–≥–æ –Ω–µ –º–µ–Ω—è–µ—Ç - –≤—Å–µ —Ä–∞–≤–Ω–æ –±—É–¥–µ—Ç –æ–¥–∏–Ω –±–∞—Ç—á —Ä–∞–∑–º–µ—Ä–æ–º 15.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –£–ø—Ä–æ—Å—Ç–∏—Ç—å –¥–æ:

```javascript
const batchOptions = {
  batchSize: 50,
  concurrency: 2,
  rateLimitDelay: 3000,
  maxRetries: 3
};
```

---

#### 1.6. –°–º–µ—à–∞–Ω–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ console.log –∏ logger

–ü–æ –≤—Å–µ–º—É –ø—Ä–æ–µ–∫—Ç—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏ `console.log()`, –∏ `logger.*()`. –≠—Ç–æ –∑–∞—Ç—Ä—É–¥–Ω—è–µ—Ç –æ—Ç–ª–∞–¥–∫—É –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ª–æ–≥–æ–≤.

**–ù–∞–π–¥–µ–Ω–æ –≤:**
- `app/api/batch/status/route.js` (—Å—Ç—Ä–æ–∫–∏ 12, 17, 68, 99, 108-110, 233)
- `app/api/batch/results/route.js` (—Å—Ç—Ä–æ–∫–∏ 13, 26, 64, 80, 136, 159, 211)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ `console.log()` –Ω–∞ `logger.info()` –∏–ª–∏ `logger.debug()`

---

## 2Ô∏è‚É£ –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø –°–ö–û–†–û–°–¢–ò –ó–ê–ì–†–£–ó–ö–ò –§–û–†–ú–´

### üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

**–í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ä–º—ã** (–¥–ª—è —Ç–∏–ø–∏—á–Ω–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è - 3 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞, 50 –Ω–∞–≤—ã–∫–æ–≤):
- –ë–µ–∑ –∫—ç—à–∞: **3-8 —Å–µ–∫—É–Ω–¥**
- –° –∫—ç—à–µ–º: **<100–º—Å**

### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### 2.1. –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ `/api/form/[token]/route.js`

```javascript
// –°—Ç—Ä–æ–∫–∞ 58 - —Å–Ω–∞—á–∞–ª–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏
const employees = await listEvaluateesForReviewerUser(reviewerUserId);

// –°—Ç—Ä–æ–∫–∞ 74 - –∑–∞—Ç–µ–º –Ω–∞–≤—ã–∫–∏
const skillGroups = await fetchEmployeeSkillRowsForReviewerUser(employees, reviewerUserId);
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ. –î–ª—è –±–æ–ª—å—à–∏—Ö –∫–æ–º–∞–Ω–¥:
- –ó–∞–≥—Ä—É–∑–∫–∞ employees: 1-3 —Å–µ–∫
- –ó–∞–≥—Ä—É–∑–∫–∞ skills: 2-5 —Å–µ–∫
- **–ò—Ç–æ–≥–æ: 3-8 —Å–µ–∫—É–Ω–¥**

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ skills –∑–∞–≤–∏—Å—è—Ç –æ—Ç employees, –ø–æ—ç—Ç–æ–º—É –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏—è –Ω–µ–≤–æ–∑–º–æ–∂–Ω–∞ –Ω–∞–ø—Ä—è–º—É—é. –û–¥–Ω–∞–∫–æ –º–æ–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –≤–Ω—É—Ç—Ä–∏ `fetchEmployeeSkillRowsForReviewerUser`.

---

#### 2.2. –ó–∞–≥—Ä—É–∑–∫–∞ –í–°–ï–• –Ω–∞–≤—ã–∫–æ–≤ —Å—Ä–∞–∑—É

–í `fetchEmployeeSkillRowsForReviewerUser` –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –º–∞—Ç—Ä–∏—Ü—ã –¥–ª—è –≤—Å–µ—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º.

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –î–ª—è 10 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ √ó 20 –Ω–∞–≤—ã–∫–æ–≤ = 200 —Å—Ç—Ä–æ–∫ –º–∞—Ç—Ä–∏—Ü—ã
- Notion API –∏–º–µ–µ—Ç –ª–∏–º–∏—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ (100 –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É)
- –≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 5-15 —Å–µ–∫—É–Ω–¥ –¥–ª—è –±–æ–ª—å—à–∏—Ö –∫–æ–º–∞–Ω–¥

**–†–µ—à–µ–Ω–∏—è:**

```javascript
// –û–ø—Ü–∏—è 1: –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º
// –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–µ—Ä–≤–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ —Å—Ä–∞–∑—É, –æ—Å—Ç–∞–ª—å–Ω—ã—Ö - –ø–æ –∑–∞–ø—Ä–æ—Å—É (–Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ)

// –û–ø—Ü–∏—è 2: –ü–∞–≥–∏–Ω–∞—Ü–∏—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
// –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ 20-30 –Ω–∞–≤—ã–∫–æ–≤, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–¥–≥—Ä—É–∂–∞—Ç—å –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ

// –û–ø—Ü–∏—è 3: Server-Side Streaming (Next.js)
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å React Suspense + streaming –¥–ª—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
import { Suspense } from 'react';

<Suspense fallback={<LoadingSpinner />}>
  <SkillsForm token={token} />
</Suspense>
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ù–∞—á–∞—Ç—å —Å **–û–ø—Ü–∏–∏ 1** - –æ–Ω–∞ –ø—Ä–æ—â–µ –≤—Å–µ–≥–æ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è:

```javascript
// API: GET /api/form/[token]?employeeId=xxx
// –ó–∞–≥—Ä—É–∂–∞—Ç—å –Ω–∞–≤—ã–∫–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–¥–Ω–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

// Frontend:
const [currentEmployee, setCurrentEmployee] = useState(0);
const { skills } = useSkillsData(token, employees[currentEmployee].id);
```

---

#### 2.3. –û–≥—Ä–æ–º–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Ñ–æ—Ä–º—ã

`app/form/[token]/page.jsx` - **1576 —Å—Ç—Ä–æ–∫** –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ!

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- –ù–µ—Ç code splitting
- –í–µ—Å—å JavaScript –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É
- –°–ª–æ–∂–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

**–†–µ—à–µ–Ω–∏–µ:**

```javascript
// 1. –í—ã–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É –≤ custom hooks
// hooks/useSkillsData.js
export function useSkillsData(token) { /* ... */ }

// hooks/useFormSubmit.js
export function useFormSubmit(token, scoreData) { /* ... */ }

// 2. –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
// components/FormHeader.jsx
// components/EmployeeSkillGroup.jsx
// components/SubmitPanel.jsx
// components/ProgressBar.jsx

// 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å lazy loading –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
import dynamic from 'next/dynamic';

const EmployeeSkillGroup = dynamic(() => import('./EmployeeSkillGroup'), {
  loading: () => <div>–ó–∞–≥—Ä—É–∑–∫–∞...</div>,
  ssr: false // –û—Ç–∫–ª—é—á–∏—Ç—å SSR –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ —Å–±–æ—Ä–∫–∏
});
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –í—ã—Å–æ–∫–∏–π

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:**
- –£–º–µ–Ω—å—à–µ–Ω–∏–µ initial bundle size: -30-40%
- –£—Å–∫–æ—Ä–µ–Ω–∏–µ Time to Interactive: -20-30%
- –£–ª—É—á—à–µ–Ω–∏–µ maintainability: ++

---

#### 2.4. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–ø–∏—Å–∫–∞

–í—Å–µ –Ω–∞–≤—ã–∫–∏ —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è —Å—Ä–∞–∑—É, –¥–∞–∂–µ –µ—Å–ª–∏ –≥—Ä—É–ø–ø—ã —Å–≤–µ—Ä–Ω—É—Ç—ã (collapsed).

**–ü—Ä–æ–±–ª–µ–º–∞:**
- 200 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ ScoreRow –≤ DOM –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –ú–µ–¥–ª–µ–Ω–Ω—ã–π initial render (500-1000ms)
- –í—ã—Å–æ–∫–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ (–æ—Å–æ–±–µ–Ω–Ω–æ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö)

**–†–µ—à–µ–Ω–∏–µ:**

```bash
npm install react-window
```

```javascript
import { VariableSizeList as List } from 'react-window';

// –í–∏—Ä—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –Ω–∞–≤—ã–∫–æ–≤
<List
  height={600}
  itemCount={skills.length}
  itemSize={index => skills[index].isExpanded ? 120 : 0}
  width="100%"
>
  {({ index, style }) => (
    <div style={style}>
      <ScoreRow skill={skills[index]} />
    </div>
  )}
</List>
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°—Ä–µ–¥–Ω–∏–π (–Ω–æ –≤—ã—Å–æ–∫–∏–π ROI)

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:**
- –£—Å–∫–æ—Ä–µ–Ω–∏–µ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞: -50-70%
- –£–º–µ–Ω—å—à–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏: -60-80%
- –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –¥–∞–∂–µ –¥–ª—è 500+ –Ω–∞–≤—ã–∫–æ–≤

---

### üü° –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

#### 2.5. –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- localStorage —Å TTL 60 –º–∏–Ω—É—Ç (—Å—Ç—Ä–æ–∫–∞ 8)
- –ö—ç—à –Ω–µ –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö

**–ü—Ä–æ–±–ª–µ–º—ã:**
1. –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å –≤ Notion, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è TTL
2. TTL 60 –º–∏–Ω—É—Ç —Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–∏–π - –æ—Ü–µ–Ω–∫–∏ –º–æ–≥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥—Ä—É–≥–∏–º–∏ –ª—é–¥—å–º–∏
3. –ù–µ—Ç –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è - –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∫–æ–¥–∞ —Å—Ç–∞—Ä—ã–π –∫—ç—à –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –æ—à–∏–±–∫–∏

**–†–µ—à–µ–Ω–∏–µ:**

```javascript
// 1. –î–æ–±–∞–≤–∏—Ç—å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—ç—à–∞
const CACHE_VERSION = '2.1'; // –û–±–Ω–æ–≤–ª—è—Ç—å –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
const cacheKey = `skills_${token}_v${CACHE_VERSION}`;

// 2. –£–º–µ–Ω—å—à–∏—Ç—å TTL –¥–æ 10-15 –º–∏–Ω—É—Ç
const CACHE_TTL = 10 * 60 * 1000; // 10 –º–∏–Ω—É—Ç

// 3. –î–æ–±–∞–≤–∏—Ç—å manual invalidation
function invalidateCache() {
  localStorage.removeItem(`skills_${token}_v${CACHE_VERSION}`);
}

// –ö–Ω–æ–ø–∫–∞ "–û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ" –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
<button onClick={() => { invalidateCache(); refetch(); }}>
  ‚ü≥ –û–±–Ω–æ–≤–∏—Ç—å
</button>

// 4. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: ETag –¥–ª—è —É—Å–ª–æ–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
const cachedETag = localStorage.getItem(`etag_${token}`);
const response = await fetch(`/api/form/${token}`, {
  headers: {
    'If-None-Match': cachedETag // 304 –µ—Å–ª–∏ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å
  }
});

if (response.status === 304) {
  // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à
} else {
  const newETag = response.headers.get('ETag');
  localStorage.setItem(`etag_${token}`, newETag);
}
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°—Ä–µ–¥–Ω–∏–π

---

#### 2.6. –ò–∑–±—ã—Ç–æ—á–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ Notion

–í `fetchEmployeeSkillRowsForReviewerUser` (lib/notion.js:620):
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–∞–∂–¥–æ–º –Ω–∞–≤—ã–∫–µ —á–µ—Ä–µ–∑ rollup –ø–æ–ª—è
- –î–ª—è 100 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –Ω–∞–≤—ã–∫–æ–≤ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞:**
- ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (–±–∞—Ç—á–∞–º–∏ –ø–æ 30)
- ‚úÖ LRU –∫—ç—à –¥–ª—è –Ω–∞–≤—ã–∫–æ–≤ (TTL 10 –º–∏–Ω)
- ‚úÖ –ö—ç—à –Ω–∞ —É—Ä–æ–≤–Ω–µ DB properties (TTL 30 –º–∏–Ω)

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**

```javascript
// –£–≤–µ–ª–∏—á–∏—Ç—å TTL –¥–ª—è –Ω–∞–≤—ã–∫–æ–≤ - –æ–Ω–∏ —Ä–µ–¥–∫–æ –º–µ–Ω—è—é—Ç—Å—è
const SKILLS_CACHE_TTL = 24 * 60 * 60 * 1000; // 24 —á–∞—Å–∞

// –í lib/config.js
CACHE: {
  SKILLS_TTL: 24 * 60 * 60 * 1000,  // 24 —á–∞—Å–∞ (–±—ã–ª–æ 10 –º–∏–Ω)
  DB_STRUCTURE_TTL: 7 * 24 * 60 * 60 * 1000, // 7 –¥–Ω–µ–π (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î –º–µ–Ω—è–µ—Ç—Å—è —Ä–µ–¥–∫–æ)
  EMPLOYEE_TTL: 60 * 60 * 1000,     // 1 —á–∞—Å
}
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ù–∏–∑–∫–∏–π (—É–∂–µ —Ö–æ—Ä–æ—à–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ)

---

### üü¢ –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–∫–∞—á–µ—Å—Ç–≤–æ –∂–∏–∑–Ω–∏)

#### 2.7. –ù–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∑–∞–≥—Ä—É–∑–∫–∏

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** –ü—Ä–æ—Å—Ç–æ–π spinner —Å 4 —ç—Ç–∞–ø–∞–º–∏.

**–£–ª—É—á—à–µ–Ω–∏–µ:**

```javascript
// –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö
const [loadingProgress, setLoadingProgress] = useState(0);

// –í useSkillsData hook
async function fetchSkills() {
  setLoadingProgress(0);

  // –ó–∞–≥—Ä—É–∑–∫–∞ employees - 30%
  const employees = await listEvaluatees(...);
  setLoadingProgress(30);

  // –ó–∞–≥—Ä—É–∑–∫–∞ skills - 30-90%
  const totalEmployees = employees.length;
  const skills = [];

  for (let i = 0; i < totalEmployees; i++) {
    const employeeSkills = await loadSkillsForEmployee(employees[i]);
    skills.push(...employeeSkills);

    const progress = 30 + ((i + 1) / totalEmployees) * 60; // 30% ‚Üí 90%
    setLoadingProgress(progress);
  }

  // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ - 100%
  setLoadingProgress(100);
}

// UI
<ProgressBar value={loadingProgress} max={100} />
<p>{loadingProgress}% –∑–∞–≥—Ä—É–∂–µ–Ω–æ</p>
```

---

### üìà –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–π –ø–ª–∞–Ω –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

#### –§–∞–∑–∞ 1 - –ë—ã—Å—Ç—Ä—ã–µ –ø–æ–±–µ–¥—ã (1-2 –¥–Ω—è) üöÄ

1. ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É `context.env` –≤ results/route.js
2. ‚úÖ –ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ `console.log` –Ω–∞ `logger`
3. ‚úÖ –£–º–µ–Ω—å—à–∏—Ç—å CACHE_TTL –¥–æ 10 –º–∏–Ω—É—Ç + –¥–æ–±–∞–≤–∏—Ç—å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
4. ‚úÖ –£–¥–∞–ª–∏—Ç—å –±–µ—Å–ø–æ–ª–µ–∑–Ω—É—é –ª–æ–≥–∏–∫—É batchSize
5. ‚úÖ –£–≤–µ–ª–∏—á–∏—Ç—å TTL –¥–ª—è –Ω–∞–≤—ã–∫–æ–≤ –¥–æ 24 —á–∞—Å–æ–≤

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:**
- –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å: +
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: +10-15%
- –ú–µ–Ω—å—à–µ —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ –∫—ç—à–∞

**–¢—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç—ã:** 2-4 —á–∞—Å–∞

---

#### –§–∞–∑–∞ 2 - –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (3-5 –¥–Ω–µ–π) üîß

1. üîß –†–∞–∑–±–∏—Ç—å page.jsx –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ hooks
   - –°–æ–∑–¥–∞—Ç—å `hooks/useSkillsData.js`, `hooks/useFormSubmit.js`
   - –í—ã–Ω–µ—Å—Ç–∏ `components/FormHeader.jsx`, `SubmitPanel.jsx`, `ProgressBar.jsx`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `dynamic()` –¥–ª—è –ª–µ–Ω–∏–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏

2. üîß –î–æ–±–∞–≤–∏—Ç—å react-window –¥–ª—è –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É
   - –û–±–µ—Ä–Ω—É—Ç—å —Å–ø–∏—Å–æ–∫ –Ω–∞–≤—ã–∫–æ–≤ –≤ `VariableSizeList`

3. üîß –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö
   - API: –¥–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `?employeeId=xxx`
   - Frontend: –∑–∞–≥—Ä—É–∂–∞—Ç—å –ø–æ –æ–¥–Ω–æ–º—É —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É
   - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–µ—Ä–≤–æ–≥–æ —Å—Ä–∞–∑—É, –æ—Å—Ç–∞–ª—å–Ω—ã—Ö - –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é

4. üîß –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "–û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ"
   - Manual cache invalidation
   - –ü–æ–ª–µ–∑–Ω–æ –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–Ω–∞–µ—Ç, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:**
- –°–∫–æ—Ä–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏: -40-60%
- Time to Interactive: -50%
- Bundle size: -30%
- UX: ++

**–¢—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç—ã:** 1-2 –¥–Ω—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

---

#### –§–∞–∑–∞ 3 - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (1-2 –Ω–µ–¥–µ–ª–∏) üèóÔ∏è

1. üèóÔ∏è Server-Side Streaming (Next.js Suspense)
   ```javascript
   // –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –æ—Ç–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö —Å —Å–µ—Ä–≤–µ—Ä–∞
   export async function GET(req) {
     const encoder = new TextEncoder();

     const stream = new ReadableStream({
       async start(controller) {
         // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–µ—Ä–≤–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
         const firstEmployee = await loadFirstEmployee();
         controller.enqueue(encoder.encode(JSON.stringify(firstEmployee)));

         // –ó–∞—Ç–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –ø–æ –º–µ—Ä–µ –∑–∞–≥—Ä—É–∑–∫–∏
         for await (const employee of loadRemainingEmployees()) {
           controller.enqueue(encoder.encode(JSON.stringify(employee)));
         }

         controller.close();
       }
     });

     return new Response(stream);
   }
   ```

2. üèóÔ∏è Service Worker –¥–ª—è offline —Ä–µ–∂–∏–º–∞
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏–∫–∏
   - Offline fallback –¥–ª—è —Ñ–æ—Ä–º—ã
   - Background sync –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ü–µ–Ω–æ–∫

3. üèóÔ∏è –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è (ISR)
   - Pre-render –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
   - Revalidate –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç

4. üèóÔ∏è –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Notion –∑–∞–ø—Ä–æ—Å–æ–≤
   - Batch loading –¥–ª—è employee names
   - Prefetch —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:**
- –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å: ++
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: -70% –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏
- Offline support: +
- Perceived performance: +++

**–¢—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç—ã:** 1-2 –Ω–µ–¥–µ–ª–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

---

## 3Ô∏è‚É£ –°–¶–ï–ù–ê–†–ò–ô: –û–¢–ü–†–ê–í–ö–ê 150 –û–¶–ï–ù–û–ö –û–î–ù–û–í–†–ï–ú–ï–ù–ù–û

### üî¨ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏

#### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã:

1. **Frontend** (`app/form/[token]/page.jsx`)
2. **API Gateway** (`app/api/batch/submit/route.js`)
3. **Cloudflare KV** (–æ—á–µ—Ä–µ–¥—å)
4. **Cloudflare Worker** (–æ–±—Ä–∞–±–æ—Ç—á–∏–∫, –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π)
5. **Notion API** (—Ü–µ–ª–µ–≤–∞—è –ë–î)

---

### üìä –®–∞–≥ –∑–∞ —à–∞–≥–æ–º: —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ 150 –æ—Ü–µ–Ω–æ–∫

#### –®–∞–≥ 1: Frontend –æ–±—Ä–∞–±–æ—Ç–∫–∞ (page.jsx:356-369)

```javascript
// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–û—Ç–ø—Ä–∞–≤–∏—Ç—å"
const batchOptions = {
  batchSize: 50,        // ‚úÖ 150 –æ–ø–µ—Ä–∞—Ü–∏–π ‚Üí 3 –±–∞—Ç—á–∞ –ø–æ 50
  concurrency: 2,       // ‚úÖ –ú–∞–∫—Å 2 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞
  rateLimitDelay: 3000, // ‚úÖ 3 —Å–µ–∫—É–Ω–¥—ã –º–µ–∂–¥—É –±–∞—Ç—á–∞–º–∏
  maxRetries: 3         // ‚úÖ –î–æ 3 –ø–æ–≤—Ç–æ—Ä–æ–≤ –ø—Ä–∏ –æ—à–∏–±–∫–µ
};

// POST /api/batch/submit
const response = await fetch('/api/batch/submit', {
  method: 'POST',
  body: JSON.stringify({ operations, options: batchOptions })
});
```

**–í—Ä–µ–º—è:** ~500ms

---

#### –®–∞–≥ 2: Backend –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ KV –æ—á–µ—Ä–µ–¥—å

```javascript
// app/api/batch/submit/route.js:76
const { batchId, jobIds } = await addBatchToKVQueue(operations, processorOptions);

// –°–æ–∑–¥–∞–µ—Ç—Å—è:
// - 1 batch metadata: queue:batch:{batchId}
// - 3 job –∑–∞–ø–∏—Å–∏: queue:job:{jobId}_0, queue:job:{jobId}_1, queue:job:{jobId}_2
```

**–ß—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ KV:**

```javascript
// queue:batch:batch_1733234567890_abc123
{
  batchId: "batch_1733234567890_abc123",
  totalJobs: 3,
  totalOperations: 150,
  jobIds: ["job_..._0", "job_..._1", "job_..._2"],
  status: "pending",
  created: 1733234567890
}

// queue:job:job_..._0
{
  jobId: "job_..._0",
  operations: [ /* 50 –æ–ø–µ—Ä–∞—Ü–∏–π */ ],
  status: "pending",
  created: 1733234567890,
  retries: 0
}
```

**–í—Ä–µ–º—è:** ~1-2 —Å–µ–∫—É–Ω–¥—ã (–∑–∞–ø–∏—Å—å –≤ KV)

---

#### –®–∞–≥ 3: Frontend –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç

```javascript
{
  success: true,
  batchId: "batch_1733234567890_abc123",
  jobIds: ["job_..._0", "job_..._1", "job_..._2"],
  totalOperations: 150,
  totalJobs: 3,
  statusEndpoint: "/api/batch/status?jobIds=...",
  resultsEndpoint: "/api/batch/results?jobIds=..."
}
```

Frontend –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç: `‚úÖ 150 –æ–ø–µ—Ä–∞—Ü–∏–π –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ`

---

#### –®–∞–≥ 4: Cloudflare Worker –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—á–µ—Ä–µ–¥—å

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** Worker –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, –Ω–æ –≤–æ—Ç –∫–∞–∫ –æ–Ω –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å:

```javascript
// Cloudflare Worker (cron trigger: */1 * * * * - –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É)
export default {
  async scheduled(event, env, ctx) {
    const kv = env.NOTION_QUEUE_KV;

    // 1. –ü–æ–ª—É—á–∏—Ç—å pending jobs
    const jobs = await getPendingJobs(kv);

    // 2. –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∂–¥—ã–π job
    for (const job of jobs) {
      ctx.waitUntil(processJob(job, env));
    }
  }
}

async function processJob(job, env) {
  // –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å
  job.status = 'processing';
  await saveJob(job);

  // –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å rate limiting
  for (const operation of job.operations) {
    try {
      await updateNotionPage(operation, env.NOTION_TOKEN);
      job.successful++;
    } catch (error) {
      job.failed++;
      job.errors.push({ operation, error });
    }

    await sleep(3000); // Rate limit delay
  }

  // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
  job.status = 'completed';
  await saveJob(job);
  await saveResults(job);
}
```

**–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
- Job #1 (50 –æ–ø–µ—Ä–∞—Ü–∏–π): ~150 —Å–µ–∫—É–Ω–¥ (2.5 –º–∏–Ω)
- Job #2 (50 –æ–ø–µ—Ä–∞—Ü–∏–π): ~150 —Å–µ–∫—É–Ω–¥ (2.5 –º–∏–Ω)
- Job #3 (50 –æ–ø–µ—Ä–∞—Ü–∏–π): ~150 —Å–µ–∫—É–Ω–¥ (2.5 –º–∏–Ω)

–° `concurrency: 2` (2 job –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ):
- Job #1 –∏ #2 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ: ~150 —Å–µ–∫—É–Ω–¥
- Job #3 –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è: +150 —Å–µ–∫—É–Ω–¥
- **–ò—Ç–æ–≥–æ: ~5 –º–∏–Ω—É—Ç**

–° –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π (worker –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ 1 job):
- **–ò—Ç–æ–≥–æ: ~7.5 –º–∏–Ω—É—Ç**

---

#### –®–∞–≥ 5: Frontend –º–æ–∂–µ—Ç poll —Å—Ç–∞—Ç—É—Å (–Ω–æ —Å–µ–π—á–∞—Å –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)

**–¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** Frontend –Ω–µ poll'–∏—Ç —Å—Ç–∞—Ç—É—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!

```javascript
// ‚ùå –≠—Ç–æ–≥–æ –∫–æ–¥–∞ –ù–ï–¢ –≤ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
const pollInterval = setInterval(async () => {
  const status = await fetch(`/api/batch/status?jobIds=${jobIds.join(',')}`);
  const data = await status.json();

  if (data.isCompleted) {
    clearInterval(pollInterval);
    showSuccess(`‚úÖ ${data.completedOperations} –æ—Ü–µ–Ω–æ–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ!`);
  } else {
    updateProgress(data.overallProgress); // –ü–æ–∫–∞–∑–∞—Ç—å 45%, 67%, –∏ —Ç.–¥.
  }
}, 3000); // –ö–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å polling –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ!

---

### ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–∏ –º–∞—Å—Å–æ–≤–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ

#### –ü—Ä–æ–±–ª–µ–º–∞ 1: Notion API Rate Limiting

**–õ–∏–º–∏—Ç—ã Notion:**
- –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –ª–∏–º–∏—Ç: ~3 requests/second
- Burst: –¥–æ 10 requests –∑–∞ –∫–æ—Ä–æ—Ç–∫–∏–π –ø–µ—Ä–∏–æ–¥
- 429 –æ—à–∏–±–∫–∏ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏

**–¢–µ–∫—É—â–∞—è –∑–∞—â–∏—Ç–∞:**
- ‚úÖ `notionRateLimit.js` - –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π rate limiter
- ‚úÖ Exponential backoff –ø—Ä–∏ 429
- ‚úÖ Retry logic (–¥–æ 3 –ø–æ–ø—ã—Ç–æ–∫)
- ‚úÖ `rateLimitDelay: 3000ms` –º–µ–∂–¥—É –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏

**–û—Ü–µ–Ω–∫–∞:** ‚úÖ **–•–æ—Ä–æ—à–æ –∑–∞—â–∏—â–µ–Ω–æ** –æ—Ç rate limiting.

---

#### –ü—Ä–æ–±–ª–µ–º–∞ 2: Cloudflare KV Limits

**–õ–∏–º–∏—Ç—ã KV:**
- ‚úÖ Write: 1000 ops/sec (–¥–ª—è 150 –æ–ø–µ—Ä–∞—Ü–∏–π –±–æ–ª–µ–µ —á–µ–º –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ)
- ‚úÖ Value size: 25MB max (150 –æ–ø–µ—Ä–∞—Ü–∏–π ~ 50KB)
- ‚úÖ Key length: 512 chars (–Ω–∞—à–∏ –∫–ª—é—á–∏ ~ 50-80 chars)
- ‚úÖ Read: 100,000 ops/sec

**–û—Ü–µ–Ω–∫–∞:** ‚úÖ **KV —Å–ø—Ä–∞–≤–∏—Ç—Å—è** —Å –Ω–∞–≥—Ä—É–∑–∫–æ–π –±–µ–∑ –ø—Ä–æ–±–ª–µ–º.

---

#### –ü—Ä–æ–±–ª–µ–º–∞ 3: Worker CPU Time Limits

**Cloudflare Workers –ª–∏–º–∏—Ç—ã:**
- CPU time: 10ms –±–µ—Å–ø–ª–∞—Ç–Ω–æ, 50ms Workers Free, **30 —Å–µ–∫—É–Ω–¥ Workers Paid**
- Memory: 128MB

**–î–ª—è 150 –æ–ø–µ—Ä–∞—Ü–∏–π:**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ cron trigger (scheduled): ‚úÖ –ù–µ—Ç CPU time limit
- 150 –æ–ø–µ—Ä–∞—Ü–∏–π √ó 3 —Å–µ–∫ = 450 —Å–µ–∫ = 7.5 –º–∏–Ω—É—Ç ‚úÖ OK

**–û—Ü–µ–Ω–∫–∞:** ‚úÖ **–ù–µ—Ç –ø—Ä–æ–±–ª–µ–º**, —Ç.–∫. –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ cron trigger.

---

#### –ü—Ä–æ–±–ª–µ–º–∞ 4: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ—Å—Ç–∏

–ï—Å–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–µ—Ä–≤–µ—Ç—Å—è –Ω–∞ 75-–π –æ–ø–µ—Ä–∞—Ü–∏–∏:
- ‚ùå –ù–µ—Ç rollback (–ø–µ—Ä–≤—ã–µ 74 –æ–ø–µ—Ä–∞—Ü–∏–∏ –æ—Å—Ç–∞–Ω—É—Ç—Å—è –≤ Notion)
- ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

**–¢–µ–∫—É—â–∞—è –∑–∞—â–∏—Ç–∞:**
- ‚úÖ Retry logic –≤ worker
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ KV
- ‚úÖ –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ failed –æ–ø–µ—Ä–∞—Ü–∏–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å:

```javascript
// –í worker: –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø–æ—Å–ª–µ–¥–Ω–µ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ
const page = await notion.pages.retrieve({ page_id: pageId });
const lastModified = page.last_edited_time;

// –ï—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –º–∏–Ω—É—Ç - skip
if (Date.now() - new Date(lastModified) < 5 * 60 * 1000) {
  console.warn('Page recently modified, skipping');
  return;
}

// –ò–Ω–∞—á–µ - –æ–±–Ω–æ–≤–∏—Ç—å
await notion.pages.update({ page_id: pageId, properties });
```

---

### üìä –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è 150 –æ–ø–µ—Ä–∞—Ü–∏–π

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞—Ç—á–µ–π** | 3 (–ø–æ 50 –æ–ø–µ—Ä–∞—Ü–∏–π) |
| **–í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è jobs –≤ KV** | 1-2 —Å–µ–∫—É–Ω–¥—ã |
| **–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ (worker)** | 5-7.5 –º–∏–Ω—É—Ç |
| **–ó–∞–ø—Ä–æ—Å–æ–≤ –∫ Notion API** | 150-450 (—Å —É—á–µ—Ç–æ–º retry) |
| **–ó–∞–ø—Ä–æ—Å–æ–≤ –∫ KV** | ~10-15 (write jobs + read/update status) |
| **–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—é** | 3-4 —Å–µ–∫—É–Ω–¥—ã |
| **–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—à–∏–±–æ–∫** | 5-10% (429, network) |
| **–£—Å–ø–µ—à–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (–æ–∂–∏–¥–∞–µ—Ç—Å—è)** | 135-145 –∏–∑ 150 (90-95%) |
| **CPU time (worker)** | ~100-200ms (–æ—Å–Ω–æ–≤–Ω–æ–µ –≤—Ä–µ–º—è - –æ–∂–∏–¥–∞–Ω–∏–µ Notion API) |
| **Memory usage** | ~10-20MB |

---

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ

1. ‚úÖ **Batch —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ** - 150 –æ–ø–µ—Ä–∞—Ü–∏–π –ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–µ–ª—è—Ç—Å—è –Ω–∞ 3 –±–∞—Ç—á–∞
2. ‚úÖ **KV –æ—á–µ—Ä–µ–¥—å** - –Ω–∞–¥–µ–∂–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å TTL
3. ‚úÖ **Rate limiting** - –∑–∞—â–∏—Ç–∞ –æ—Ç 429 –æ—à–∏–±–æ–∫ Notion
4. ‚úÖ **Retry logic** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä—ã –ø—Ä–∏ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–∫–∞—Ö
5. ‚úÖ **Cloudflare Worker** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤ —Ñ–æ–Ω–µ –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ frontend
6. ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å 500+ –æ–ø–µ—Ä–∞—Ü–∏–π –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

### ‚ö†Ô∏è –ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å

#### 1. –î–æ–±–∞–≤–∏—Ç—å polling –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–∏–¥–∏—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏.

**–†–µ—à–µ–Ω–∏–µ:**

```javascript
// app/form/[token]/page.jsx

const [processingStatus, setProcessingStatus] = useState(null);

async function handleSubmit(e) {
  e.preventDefault();

  // –û—Ç–ø—Ä–∞–≤–∫–∞
  const response = await fetch('/api/batch/submit', { /* ... */ });
  const { jobIds } = await response.json();

  // –ù–∞—á–∞—Ç—å polling
  pollStatus(jobIds);
}

function pollStatus(jobIds) {
  const pollInterval = setInterval(async () => {
    const response = await fetch(`/api/batch/status?jobIds=${jobIds.join(',')}`);
    const data = await response.json();

    setProcessingStatus({
      progress: data.overallProgress,
      completed: data.completedOperations,
      total: data.totalOperations,
      isCompleted: data.isCompleted
    });

    if (data.isCompleted) {
      clearInterval(pollInterval);

      // –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
      const resultsResponse = await fetch(`/api/batch/results?jobIds=${jobIds.join(',')}`);
      const results = await resultsResponse.json();

      showResults(results);
    }
  }, 3000); // Poll –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã

  // Timeout –ø–æ—Å–ª–µ 15 –º–∏–Ω—É—Ç
  setTimeout(() => {
    clearInterval(pollInterval);
    showError('–ü—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è');
  }, 15 * 60 * 1000);
}

// UI
{processingStatus && (
  <div className="processing-status">
    <ProgressBar value={processingStatus.progress} />
    <p>–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: {processingStatus.completed} / {processingStatus.total}</p>
  </div>
)}
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –í—ã—Å–æ–∫–∏–π

---

#### 2. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏

**–†–µ—à–µ–Ω–∏–µ:**

```javascript
// –í worker –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ job
async function notifyCompletion(job, reviewerEmail) {
  // –û–ø—Ü–∏—è 1: Email (—á–µ—Ä–µ–∑ SendGrid, Resend, etc.)
  await sendEmail({
    to: reviewerEmail,
    subject: '–û—Ü–µ–Ω–∫–∏ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã',
    body: `–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ ${job.successful} –∏–∑ ${job.total} –æ—Ü–µ–Ω–æ–∫`
  });

  // –û–ø—Ü–∏—è 2: Telegram bot
  await sendTelegramMessage({
    chatId: reviewerTelegramId,
    text: `‚úÖ –í–∞—à–∏ ${job.successful} –æ—Ü–µ–Ω–æ–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ Notion!`
  });

  // –û–ø—Ü–∏—è 3: Web Push notification
  await sendWebPush({
    userId: reviewerUserId,
    title: '–û—Ü–µ–Ω–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã',
    body: `${job.successful}/${job.total} –æ–ø–µ—Ä–∞—Ü–∏–π –≤—ã–ø–æ–ª–Ω–µ–Ω–æ`
  });
}
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°—Ä–µ–¥–Ω–∏–π

---

#### 3. –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏

**–†–µ—à–µ–Ω–∏–µ:**

```javascript
// –°–æ—Ö—Ä–∞–Ω—è—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é —Ç–∞–±–ª–∏—Ü—É/KV
{
  batchId: "...",
  reviewerId: "...",
  timestamp: "...",
  metrics: {
    totalOperations: 150,
    successful: 143,
    failed: 7,
    avgProcessingTime: 3200, // ms
    totalDuration: 420000, // 7 –º–∏–Ω—É—Ç
    retries: 12,
    notionApiErrors: {
      "429": 5,
      "timeout": 2
    }
  }
}

// Dashboard –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
// - –°—Ä–µ–¥–Ω—è—è —É—Å–ø–µ—à–Ω–æ—Å—Ç—å –∑–∞ –Ω–µ–¥–µ–ª—é
// - –°–∞–º—ã–µ —á–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏
// - –ü–∏–∫–æ–≤—ã–µ –Ω–∞–≥—Ä—É–∑–∫–∏
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ù–∏–∑–∫–∏–π (nice-to-have)

---

## üìù –ò—Ç–æ–≥–æ–≤—ã–µ –≤—ã–≤–æ–¥—ã

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ:

1. ‚úÖ **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏** - KV –æ—á–µ—Ä–µ–¥—å + Worker –Ω–∞–¥–µ–∂–Ω—ã –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã
2. ‚úÖ **Rate limiting** - Notion API –∑–∞—â–∏—â–µ–Ω –æ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏
3. ‚úÖ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - LRU cache + localStorage —É—Å–∫–æ—Ä—è—é—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–≥—Ä—É–∑–∫–∏
4. ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - retry logic + exponential backoff

### ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:

1. ‚ùå **–û—à–∏–±–∫–∞ –≤ results/route.js** - `context.env` –≤—ã–∑–æ–≤–µ—Ç runtime error
2. ‚ö†Ô∏è **–ù–µ—Ç polling –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–∏–¥–∏—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏
3. ‚ö†Ô∏è **–û–≥—Ä–æ–º–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ñ–æ—Ä–º—ã** - 1576 —Å—Ç—Ä–æ–∫ –∑–∞—Ç—Ä—É–¥–Ω—è—é—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É

### üêå –ü—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

1. üêå **–ú–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ä–º—ã** - 3-8 —Å–µ–∫—É–Ω–¥ –±–µ–∑ –∫—ç—à–∞
2. üêå **–ù–µ—Ç –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏** - –≤—Å–µ 200+ –Ω–∞–≤—ã–∫–æ–≤ –≤ DOM
3. üêå **–î–æ–ª–≥–∏–π TTL –∫—ç—à–∞** - 60 –º–∏–Ω—É—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ

---

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### Week 1 - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è üö®

**–î–µ–Ω—å 1:**
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å `context.env` –≤ results/route.js
- [ ] –ó–∞–º–µ–Ω–∏—Ç—å `console.log` –Ω–∞ `logger` –≤–µ–∑–¥–µ
- [ ] –£–º–µ–Ω—å—à–∏—Ç—å CACHE_TTL –¥–æ 10 –º–∏–Ω—É—Ç

**–î–µ–Ω—å 2:**
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—ç—à–∞ (`v2.1`)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "–û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ"
- [ ] –£–≤–µ–ª–∏—á–∏—Ç—å TTL –Ω–∞–≤—ã–∫–æ–≤ –¥–æ 24 —á–∞—Å–æ–≤

**–î–µ–Ω—å 3-5:**
- [ ] **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å polling –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ** üî¥ –ö–†–ò–¢–ò–ß–ù–û
- [ ] –î–æ–±–∞–≤–∏—Ç—å progress bar –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
- [ ] Timeout protection (15 –º–∏–Ω—É—Ç)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ü–µ–Ω–æ–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

---

### Week 2 - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ ‚ö°

**–î–µ–Ω—å 1-2: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Ñ–æ—Ä–º—ã**
- [ ] –í—ã–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É –≤ hooks (`useSkillsData`, `useFormSubmit`)
- [ ] –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (FormHeader, SubmitPanel, etc.)
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `dynamic()` –¥–ª—è lazy loading

**–î–µ–Ω—å 3-4: –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è**
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `react-window`
- [ ] –û–±–µ—Ä–Ω—É—Ç—å —Å–ø–∏—Å–æ–∫ –Ω–∞–≤—ã–∫–æ–≤ –≤ `VariableSizeList`
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–∞—Ö (500+ –Ω–∞–≤—ã–∫–æ–≤)

**–î–µ–Ω—å 5: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏**
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É (–ø–µ—Ä–≤—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ —Å—Ä–∞–∑—É)
- [ ] API endpoint —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `?employeeId=xxx`
- [ ] Prefetch —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°–∫–æ—Ä–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏: -50%
- Bundle size: -30%
- UX –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–µ–Ω

---

### Week 3 - –ö–∞—á–µ—Å—Ç–≤–æ –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å üõ°Ô∏è

- [ ] –î–æ–±–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ (email/Telegram)
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å unit —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å API endpoints
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Sentry, LogDNA)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å: ++
- Observability: ++
- –£–¥–æ–±—Å—Ç–≤–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: ++

---

## üìö –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º

### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ (—Å–¥–µ–ª–∞—Ç—å —Å–µ–π—á–∞—Å):

1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É `context.env` –≤ results/route.js
2. –î–æ–±–∞–≤–∏—Ç—å polling —Å—Ç–∞—Ç—É—Å–∞ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
3. –î–æ–±–∞–≤–∏—Ç—å progress bar –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ü–µ–Ω–æ–∫

### üü° –í–∞–∂–Ω—ã–µ (—Å–¥–µ–ª–∞—Ç—å —Å–∫–æ—Ä–æ):

4. –†–∞–∑–±–∏—Ç—å page.jsx –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
5. –î–æ–±–∞–≤–∏—Ç—å –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—é —Å–ø–∏—Å–∫–∞ (react-window)
6. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (–≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–º–µ–Ω—å—à–∏—Ç—å TTL)
7. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö

### üü¢ –ñ–µ–ª–∞—Ç–µ–ª—å–Ω—ã–µ (–º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å):

8. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
9. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –º–µ—Ç—Ä–∏–∫–∏
10. Service Worker –¥–ª—è offline
11. Server-Side Streaming

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Notion API Rate Limits](https://developers.notion.com/reference/request-limits)
- [Cloudflare Workers Documentation](https://developers.cloudflare.com/workers/)
- [Cloudflare KV Storage](https://developers.cloudflare.com/workers/runtime-apis/kv/)
- [React Window (–≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è)](https://github.com/bvaughn/react-window)
- [Next.js Performance Optimization](https://nextjs.org/docs/advanced-features/measuring-performance)
- [Next.js Dynamic Imports](https://nextjs.org/docs/advanced-features/dynamic-import)

---

**–ö–æ–Ω–µ—Ü –æ—Ç—á–µ—Ç–∞**

> –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –ø–æ –ª—é–±–æ–º—É –ø—É–Ω–∫—Ç—É –∏–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å —Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π - –¥–∞–π—Ç–µ –∑–Ω–∞—Ç—å!
